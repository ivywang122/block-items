(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(t,e,n){t.exports=n(34)},27:function(t,e,n){},34:function(t,e,n){"use strict";n.r(e);var i=n(0),o=n.n(i),a=n(9),r=n.n(a),s=n(2),u=n(17),m=n(13),c=n(4),l=n(5),d=n(8),h=n(6),p=n(7),g=n(1),f=(n(27),n(18)),x=n(3);function b(){var t=Object(s.a)(["\n  position: absolute;\n\ttop: ",";\n  left: ",";\n  width: ",";\n  height: ",";\n  padding: ",";\n  box-sizing: border-box;\n  padding: 5px;\n  z-index: 1;\n  .empty-block{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n\t\twidth: 100%;\n    height: 100%;\n    border: 2px dashed ",";\n    cursor: pointer;\n    &:hover{\n      background-color: rgba(0,0,0,.05);\n      .empty-icon-wrapper{\n        opacity: 1;\n      }\n    }\n    .empty-icon-wrapper{\n      text-align: center;\n      opacity: 0;\n      color: ",";\n      .fa-icon{\n        font-size: 22px;\n      }\n    }\n  }\n"]);return b=function(){return t},t}var v=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(d.a)(this,Object(h.a)(e).call(this,t))).renderEmptyItems=n._renderEmptyItems.bind(Object(g.a)(Object(g.a)(n))),n.state={maxWidth:n.props.layoutSetting.maxWidth,maxHeight:n.props.layoutSetting.maxHeight,maxrow:n.props.layoutSetting.maxrow,maxcolumn:n.props.layoutSetting.maxcolumn,space:n.props.layoutSetting.space,emptyItems:n.props.layoutSetting.emptyItems},n}return Object(p.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(t,e){var n=this.props.layoutSetting;this.props.layoutSetting!==t.layoutSetting&&this.setState({maxWidth:n.maxWidth,maxHeight:n.maxHeight,maxrow:n.maxrow,maxcolumn:n.maxcolumn,space:n.space,emptyItems:n.emptyItems})}},{key:"render",value:function(){var t=this,e=this.state.emptyItems;return o.a.createElement("div",null,e&&e.length>0?e.map(function(e,n){return t.renderEmptyItems(e,n)}):null)}},{key:"_renderEmptyItems",value:function(t,e){var n,i,a,r,s=this.state,u=s.space,m=s.maxWidth/s.maxcolumn,c=s.maxHeight/s.maxrow;return a=c*t.row,r=m*t.column,n=m*t.sizeX,i=c*t.sizeY,o.a.createElement(w,{key:t.key,top:a,left:r,width:n,height:i,padding:u/2},o.a.createElement("div",{className:"empty-block"},o.a.createElement("div",{className:"empty-icon-wrapper"},o.a.createElement(f.a,{className:"fa-icon"}),o.a.createElement("div",null,"Edit"))))}}]),e}(i.Component),y="#c3c8d2",z="#737d91",w=x.a.div(b(),function(t){return t.top?t.top+"px":"0px"},function(t){return t.left?t.left+"px":"0px"},function(t){return t.width?t.width+"px":"auto"},function(t){return t.height?t.height+"px":"auto"},function(t){return t.padding?t.padding+"px":"0px"},y,z),S=v,k=n(20);function O(){var t=Object(s.a)(["\n  position: absolute;\n  z-index: ",";\n  .item-brick:hover ","{\n    box-shadow: ",";\n  }\n\n  .handle{\n    opacity: 0;\n    transition: .25s;\n  }\n"]);return O=function(){return t},t}function j(){var t=Object(s.a)(["\n  position: absolute;\n\twidth: 100%;\n\theight: 100%;\n  padding: ",";\n"]);return j=function(){return t},t}function E(){var t=Object(s.a)(["\n  position: relative;\n  height: 100%;\n\twidth: 100%;\n  background-color: #EEE;\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  overflow: hidden;\n  background-image: url(",");\n"]);return E=function(){return t},t}function R(){var t=Object(s.a)(["\n  position: relative;\n  z-index: 20;\n  width: 1080px;\n  height: 540px;\n  text-align: center;\n  line-height: 540px;\n  font-size: 120px;\n  color: #fefefe;\n  background-color: rgba(0,0,0,0.2);\n"]);return R=function(){return t},t}var I=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(d.a)(this,Object(h.a)(e).call(this,t))).renderItems=n._renderItems.bind(Object(g.a)(Object(g.a)(n))),n.onDragStart=n._onDragStart.bind(Object(g.a)(Object(g.a)(n))),n.onDrag=n._onDrag.bind(Object(g.a)(Object(g.a)(n))),n.onDragStop=n._onDragStop.bind(Object(g.a)(Object(g.a)(n))),n.onResizeStart=n._onResizeStart.bind(Object(g.a)(Object(g.a)(n))),n.onResize=n._onResize.bind(Object(g.a)(Object(g.a)(n))),n.onResizeStop=n._onResizeStop.bind(Object(g.a)(Object(g.a)(n))),n.rndRefs={},n.rndDelayTimeout=void 0,n.state={isLoading:!1,maxWidth:n.props.layoutSetting.maxWidth,maxHeight:n.props.layoutSetting.maxHeight,maxrow:n.props.layoutSetting.maxrow,maxcolumn:n.props.layoutSetting.maxcolumn,space:n.props.layoutSetting.space,items:n.props.layoutSetting.items,isDragging:!1,isResizing:!1,helperX:0,helperY:0,helperWidth:0,helperHeight:0,isHelperOver:!1,isOccupy:!1},n}return Object(p.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.setState({isLoading:!0})}},{key:"componentWillUnmount",value:function(){this.onMouseoverResizeHandler("remove")}},{key:"componentDidUpdate",value:function(t,e){var n=this,i=this.props.layoutSetting;i.items!==t.layoutSetting.items&&this.setState({isLoading:!1,items:i.items},function(){return n.onMouseoverResizeHandler("add")})}},{key:"render",value:function(){var t=this,e=this.state,n=e.isLoading,i=e.items;return n?o.a.createElement(X,null,"Loading..."):o.a.createElement("div",null,i&&i.length>0?i.map(function(e,n){return t.renderItems(e,n)}):null)}},{key:"_renderItems",value:function(t,e){var n,i,a,r,s=this,u=this.state,m=u.space,c=u.maxWidth,l=u.maxcolumn,d=u.maxHeight,h=u.maxrow,p=u.isDragging,g=c/l,f=d/h,x=t.imgUrl;return a=f*t.row,r=g*t.column,n=g*t.sizeX,i=f*t.sizeY,o.a.createElement(W,{key:t.id,isDragging:p,zIndex:t.zIndex},o.a.createElement(k.a,{ref:function(e){return s.rndRefs[t.id]=e},className:"item-brick",default:{x:r,y:a,width:n,height:i},minWidth:g,minHeight:f,onDragStart:function(e,n){return s.onDragStart(e,n,t)},onDrag:function(e,n){return s.onDrag(e,n,t)},onDragStop:function(e,n){return s.onDragStop(e,n,t)},onResizeStart:function(e,n,i,o){return s.onResizeStart(e,n,i,t)},onResize:function(e,n,i,o){return s.onResize(e,n,i,o,t)},onResizeStop:function(e,n,i,o){return s.onResizeStop(e,n,i,o,t)},resizeHandleStyles:D,resizeHandleClasses:L},o.a.createElement(H,{padding:m},o.a.createElement(Y,{imgUrl:x}))))}},{key:"_onDragStart",value:function(t,e,n){for(var i=this.state.items,o=0;o<i.length;o++)i[o].id===n.id&&(i[o].zIndex=2e3);this.setState({items:i})}},{key:"_onDrag",value:function(t,e,n){var i=this,o=this.state,a=o.items,r=o.isDragging,s=o.maxWidth,u=o.maxHeight,m=o.maxcolumn,c=o.maxrow;r||this.setState({isDragging:!0}),clearTimeout(this.rndDelayTimeout),this.rndDelayTimeout=setTimeout(function(){for(var t=s/m,o=u/c,r=(n.sizeX,n.sizeY,Math.round(e.x/t),Math.round(e.y/o),n.sizeX,n.sizeY,0);r<a.length;r++)n.id,a[r].id;i.setState({})},100)}},{key:"_onDragStop",value:function(t,e,n){var i=this.state,o=i.items,a=i.maxWidth,r=i.maxHeight,s=i.maxcolumn,u=i.maxrow,m=this.rndRefs[n.id],c=a/s,l=r/u,d=(n.sizeX,n.sizeY,Math.round(e.x/c)),h=Math.round(e.y/l),p=h*l,g=d*c;n.sizeX,n.sizeY;if(h<0||d<0||h+n.sizeY>u||d+n.sizeX>s)m.updatePosition({x:n.column*c,y:n.row*l});else{for(var f=0;f<o.length;f++)n.id===o[f].id&&(o[f].row=h,o[f].column=d,o[f].zIndex=2);m.updatePosition({x:g,y:p})}this.setState({items:o,isDragging:!1})}},{key:"_onResizeStart",value:function(t,e,n,i){for(var o=this.state.items,a=0;a<o.length;a++)o[a].id===i.id&&(o[a].zIndex=2e3);this.setState({items:o})}},{key:"_onResize",value:function(t,e,n,i,o){var a=this,r=this.state,s=(r.items,r.isResizing),u=r.maxWidth,m=r.maxHeight,c=r.maxcolumn,l=r.maxrow;s||this.setState({isResizing:!0}),clearTimeout(this.rndDelayTimeout),this.rndDelayTimeout=setTimeout(function(){var t=u/c,n=m/l,r=o.sizeX,s=o.sizeY,d=r*t,h=s*n,p=o.column,g=o.row,f=g*n,x=p*t;o.sizeX,o.sizeY;"topLeft"===e||"top"===e||"topRight"===e?(f-=i.height,h+=i.height):"bottomLeft"===e||"bottom"===e||"bottomRight"===e?h+=i.height:"topLeft"===e||"left"===e||"bottomLeft"===e?(x-=i.width,d+=i.width):"bottomRight"!==e&&"right"!==e&&"topRight"!==e||(d+=i.width),f=(g=Math.round(f/n))*n,x=(p=Math.round(x/t))*t,d=(r=Math.round(d/t))*t,h=(s=Math.round(h/n))*n,a.setState({})},100)}},{key:"_onResizeStop",value:function(t,e,n,i,o){var a=this.state,r=a.items,s=a.maxWidth,u=a.maxHeight,m=a.maxcolumn,c=a.maxrow,l=this.rndRefs[o.id],d=s/m,h=u/c,p=o.sizeX,g=o.sizeY,f=p*d,x=g*h,b=o.column,v=o.row,y=v*h,z=b*d;"topLeft"===e||"top"===e||"topRight"===e?(y-=i.height,x+=i.height):"bottomLeft"===e||"bottom"===e||"bottomRight"===e?x+=i.height:"topLeft"===e||"left"===e||"bottomLeft"===e?(z-=i.width,f+=i.width):"bottomRight"!==e&&"right"!==e&&"topRight"!==e||(f+=i.width),y=(v=Math.round(y/h))*h,z=(b=Math.round(z/d))*d,f=(p=Math.round(f/d))*d,x=(g=Math.round(x/h))*h;if(v<0||b<0||v>=c||b>=m||b+p>m||v+g>c)l.updatePosition({x:o.column*d,y:o.row*h}),l.updateSize({width:o.sizeX*d,height:o.sizeY*h});else{for(var w=0;w<r.length;w++)o.id===r[w].id&&(r[w].row=v,r[w].column=b,r[w].sizeX=p,r[w].sizeY=g);l.updatePosition({x:z,y:y}),l.updateSize({width:f,height:x})}this.setState({items:r,isResizing:!1})}},{key:"onMouseoverResizeHandler",value:function(t){var e=this,n=document.getElementsByClassName("handle");if(n&&n.length>0)for(var i=0;i<n.length;i++)"add"===t?(n[i].addEventListener("mouseover",function(t){return e.handlesEventListenerIn(t)}),n[i].addEventListener("mouseout",function(t){return e.handlesEventListenerOut(t)})):(n[i].removeEventListener("mouseover",function(t){return e.handlesEventListenerIn(t)}),n[i].removeEventListener("mouseout",function(t){return e.handlesEventListenerOut(t)}))}},{key:"handlesEventListenerIn",value:function(t){for(var e=t.currentTarget.parentElement.children,n=0;n<e.length;n++)e[n].classList.contains("handle")&&(e[n].style.opacity=1)}},{key:"handlesEventListenerOut",value:function(t){for(var e=t.currentTarget.parentElement.children,n=0;n<e.length;n++)e[n].classList.contains("handle")&&(e[n].style.opacity=0)}}]),e}(i.Component),D={bottom:{bottom:0,background:"linear-gradient(90deg, transparent 30%, #fff 30%)",backgroundSize:"30px 100%"},top:{top:0,background:"linear-gradient(90deg, transparent 30%, #fff 30%)",backgroundSize:"30px 100%"},left:{left:0,background:"linear-gradient(transparent 30%, #fff 30%)",backgroundSize:"100% 30px"},right:{right:0,background:"linear-gradient(transparent 30%, #fff 30%)",backgroundSize:"100% 30px"},bottomLeft:{left:0,bottom:0},bottomRight:{right:0,bottom:0},topLeft:{left:0,top:0},topRight:{right:0,top:0}},L={bottom:"handle handle-bottom",bottomLeft:"handle handle-bottom-left",botttomRight:"handle handle-bottom-right",left:"handle handle-left",right:"handle handle-right",top:"handle handle-top",topLeft:"handle handle-top-left",topRight:"handle handle-top-right"},X=x.a.div(R()),Y=x.a.div(E(),function(t){return t.imgUrl?t.imgUrl:null}),H=x.a.div(j(),function(t){return t.padding?t.padding/2+"px":0}),W=x.a.div(O(),function(t){return t.zIndex?t.zIndex:2},Y,function(t){return t.isDragging?"0 8px 20px 0 rgba(0,0,0,.5)":"0 0 20px 0 rgba(0,0,0,.5)"}),_=I,M=[{id:"items-0",row:0,column:0,sizeX:2,sizeY:2,imgUrl:"http://fakeimg.pl/440x300/282828/EAE0D0/?text=Block01",posX:0,posY:0,zoom:1},{id:"items-1",row:0,column:2,sizeX:4,sizeY:1,imgUrl:"http://fakeimg.pl/440x300/014c45/f36162/?text=Block02",posX:0,posY:0,zoom:1},{id:"items-2",row:1,column:4,sizeX:2,sizeY:2,imgUrl:"http://fakeimg.pl/440x300/f66754/37DC94/?text=Block03",posX:0,posY:0,zoom:1},{id:"items-3",row:1,column:3,sizeX:1,sizeY:2,imgUrl:"http://fakeimg.pl/440x300/ffaa1c/0072c2/?text=Block04",posX:0,posY:0,zoom:1},{id:"items-4",row:2,column:2,sizeX:1,sizeY:1,imgUrl:"http://fakeimg.pl/440x300/1d3156/f31717/?text=Block05",posX:0,posY:0,zoom:1}];function U(){var t=Object(s.a)(["\n  margin: auto;\n  width: 1080px;\n  height: 540px;\n  position: relative;\n"]);return U=function(){return t},t}function T(){var t=Object(s.a)(["\n  padding: 40px 0;\n"]);return T=function(){return t},t}var B=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(d.a)(this,Object(h.a)(e).call(this,t))).buildEmptyItems=n._buildEmptyItems.bind(Object(g.a)(Object(g.a)(n))),n.getItems=n._getItems.bind(Object(g.a)(Object(g.a)(n))),n.state={maxWidth:1080,maxHeight:540,maxrow:3,maxcolumn:6,space:10,items:[],emptyItems:[]},n}return Object(p.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.buildEmptyItems()}},{key:"render",value:function(){var t=this.state,e=t.maxWidth,n=t.maxHeight,i=t.maxrow,a=t.maxcolumn,r=t.space,s=t.items,u=t.emptyItems,c={maxWidth:e,maxHeight:n,maxrow:i,maxcolumn:a,space:r},l=Object(m.a)({},c,{emptyItems:u}),d=Object(m.a)({},c,{items:s});return o.a.createElement(N,null,o.a.createElement(C,null,o.a.createElement(S,{layoutSetting:l}),o.a.createElement(_,{layoutSetting:d})))}},{key:"_buildEmptyItems",value:function(){for(var t=this,e=[],n=this.state,i=n.maxrow,o=n.maxcolumn,a=0;a<i;a++)for(var r=0;r<o;r++){var s={key:a+"-"+r,row:a,column:r,sizeX:1,sizeY:1};e=[].concat(Object(u.a)(e),[s])}this.setState({emptyItems:e},function(){return setTimeout(function(){return t.getItems()},300)})}},{key:"_getItems",value:function(){var t;t=JSON.parse(JSON.stringify(M)),this.setState({items:t})}}]),e}(i.Component),N=x.a.div(T()),C=x.a.div(U()),J=B;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[21,1,2]]]);
//# sourceMappingURL=main.ebd1ce09.chunk.js.map